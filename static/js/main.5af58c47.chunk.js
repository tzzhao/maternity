(this.webpackJsonpmaternity=this.webpackJsonpmaternity||[]).push([[0],{68:function(t,e,a){},69:function(t,e,a){},75:function(t,e,a){"use strict";a.r(e);var n=a(32),r=a(0),o=a.n(r),c=a(9),i=a.n(c),s=(a(68),a(69),a(21)),l=a(22),u=a(27),d=a(25),j=a(108),p=a(107),h=a(97),b=a(98),f=a(99),v=a(17),O=a(20),m=a(14),y=a(24);function g(t){var e=new Date(t),a=""+(e.getMonth()+1),n=""+e.getDate(),r=e.getFullYear(),o=""+e.getHours(),c=""+e.getMinutes(),i=""+e.getSeconds();a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),o.length<2&&(o="0"+o),c.length<2&&(c="0"+c),i.length<2&&(i="0"+i);var s=[r,a,n].join("-");return"".concat(s," ").concat(o,":").concat(c,":").concat(i)}var x,w,D=a(7),E=a.n(D),I=a(13),B=a(57),F={BREAST_FEED:"breastFeed",DIAPERS:"diapers",BABY_BOTTLE:"babyBottle"};function S(){return(S=Object(I.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(B.a)("maternity",1,{upgrade:function(t,e,a,n){t.createObjectStore(F.BREAST_FEED,{keyPath:"start"}),t.createObjectStore(F.DIAPERS,{keyPath:"time"}),t.createObjectStore(F.BABY_BOTTLE,{keyPath:"start"})}});case 2:return x=t.sent,t.abrupt("return",x);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=Object(I.a)(E.a.mark((function t(e){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x.put(F.BREAST_FEED,e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=Object(I.a)(E.a.mark((function t(e){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x.put(F.DIAPERS,e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function M(){return(M=Object(I.a)(E.a.mark((function t(e){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:x.put(F.BABY_BOTTLE,e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return N.apply(this,arguments)}function N(){return(N=Object(I.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",x.getAll(F.BREAST_FEED));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return R.apply(this,arguments)}function R(){return(R=Object(I.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",x.getAll(F.BABY_BOTTLE));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return P.apply(this,arguments)}function P(){return(P=Object(I.a)(E.a.mark((function t(){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",x.getAll(F.DIAPERS));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(t){t[t.IDLE=0]="IDLE",t[t.FEEDING_R=1]="FEEDING_R",t[t.FEEDING_L=2]="FEEDING_L"}(w||(w={}));var _={data:{},status:w.IDLE,lastStart:void 0};function G(t){!function(t){k.apply(this,arguments)}(t)}var q=Object(y.b)({name:"breastFeed",initialState:_,reducers:{startRightBreastFeeding:function(t){t.status=w.FEEDING_R,t.lastStart=Math.round(Date.now()/1e3)},startLeftBreastFeeding:function(t){t.status=w.FEEDING_L,t.lastStart=Math.round(Date.now()/1e3)},stopBreastFeeding:function(t,e){var a=t.status,n=t.lastStart;if(void 0!==n&&a!==w.IDLE&&void 0!==e.payload){var r={start:n,duration:e.payload,type:a===w.FEEDING_R?"r":"l"};t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(O.a)({},n,r)),G(r)}t.status=w.IDLE,t.lastStart=void 0},loadData:function(t,e){t.data=e.payload}}}),W=q.actions,U=q.reducer,Y=a(2),Q=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).getDuration=function(){var t=n.getNowTime()-n.state.startTime,e=Math.floor(t/60),a=Math.floor(e/60),r=e-60*a,o=t-60*e,c=n.getFormattedTime(a),i=n.getFormattedTime(r),s=n.getFormattedTime(o);return"".concat(c,":").concat(i,":").concat(s)},n.openModal=function(){n.clearInterval();var t=setInterval((function(){n.forceUpdate()}),1e3);n.setState({open:!0,startTime:n.getNowTime(),refreshInterval:t}),"r"===n.props.type?n.props.startRightBreastFeeding():n.props.startLeftBreastFeeding()},n.clearInterval=function(){void 0!==n.state.refreshInterval&&clearInterval(n.state.refreshInterval)},n.saveData=function(){n.clearInterval();var t=n.getNowTime();n.props.stopBreastFeeding(t-n.state.startTime),n.setState({open:!1,refreshInterval:void 0})},n.closeModal=function(){n.clearInterval(),n.setState({open:!1,refreshInterval:void 0}),n.props.stopBreastFeeding(void 0)},n.getNowTime=function(){return Math.round(Date.now()/1e3)},n.getFormattedTime=function(t){return t<10?"0".concat(t):t},n.state={open:!1,startTime:0,refreshInterval:void 0},n}return Object(l.a)(a,[{key:"render",value:function(){var t="r"===this.props.type?"droit":"gauche";return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsxs)(j.a,{variant:"outlined",color:"primary",onClick:this.openModal,children:["Sein ",t]}),Object(Y.jsxs)(p.a,{open:this.state.open,onClose:this.closeModal,children:[Object(Y.jsxs)(h.a,{children:["Sein ",t]}),Object(Y.jsx)(b.a,{children:this.getDuration()}),Object(Y.jsxs)(f.a,{children:[Object(Y.jsx)(j.a,{autoFocus:!0,variant:"contained",onClick:this.saveData,color:"primary",children:"Fini!"}),Object(Y.jsx)(j.a,{autoFocus:!0,onClick:this.closeModal,color:"secondary",children:"Annuler"})]})]})]})}}]),a}(r.Component),J=W,H=Object(v.b)(void 0,J)(Q);function $(t){!function(t){T.apply(this,arguments)}(t)}var z,K=Object(y.b)({name:"Diaper",initialState:{data:{}},reducers:{logPeeDiaper:function(t){var e=Math.round(Date.now()/1e3),a={time:e,type:"p"};t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(O.a)({},e,a)),$(a)},logStollDiaper:function(t){var e=Math.round(Date.now()/1e3),a={time:e,type:"s"};t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(O.a)({},e,a)),$(a)},loadData:function(t,e){t.data=e.payload}}}),V=K.actions,X=K.reducer,Z=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).openModal=function(){n.setState({open:!0})},n.logPee=function(){n.props.logPeeDiaper(),n.closeModal()},n.logStool=function(){n.props.logStollDiaper(),n.closeModal()},n.closeModal=function(){n.setState({open:!1})},n.state={open:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(j.a,{variant:"outlined",color:"primary",onClick:this.openModal,children:"Couche"}),Object(Y.jsxs)(p.a,{open:this.state.open,onClose:this.closeModal,children:[Object(Y.jsx)(h.a,{children:"Couche"}),Object(Y.jsxs)(f.a,{children:[Object(Y.jsx)(j.a,{autoFocus:!0,onClick:this.logPee,variant:"contained",color:"primary",children:"Pipi"}),Object(Y.jsx)(j.a,{autoFocus:!0,onClick:this.logStool,variant:"contained",color:"primary",children:"Caca"}),Object(Y.jsx)(j.a,{autoFocus:!0,onClick:this.closeModal,variant:"contained",color:"secondary",children:"Annuler"})]})]})]})}}]),a}(r.Component),tt=V,et=Object(v.b)(void 0,tt)(Z),at=a(110),nt=a(109),rt=a(100),ot=a(111);!function(t){t[t.IDLE=0]="IDLE",t[t.FEEDING=1]="FEEDING"}(z||(z={}));var ct={data:{},status:z.IDLE,lastStart:void 0};function it(t){!function(t){M.apply(this,arguments)}(t)}var st=Object(y.b)({name:"babyBottle",initialState:ct,reducers:{startBabyBottle:function(t){t.status=z.FEEDING,t.lastStart=Math.round(Date.now()/1e3)},stopBabyBottle:function(t,e){var a=t.status,n=t.lastStart;if(void 0!==n&&a!==z.IDLE&&void 0!==e.payload){var r=e.payload,o={start:n,duration:r.duration,quantity:r.quantity};t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(O.a)({},n,o)),it(o)}t.status=z.IDLE,t.lastStart=void 0},loadData:function(t,e){t.data=e.payload}}}),lt=st.actions,ut=st.reducer,dt="bottleQuantity";var jt=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).handleChange=function(t){var e=Number(t.target.value);NaN===e&&(e=n.state.quantity),n.setState({quantity:e}),function(t){localStorage.setItem(dt,t.toString())}(e)},n.getDuration=function(){var t=n.getNowTime()-n.state.startTime,e=Math.floor(t/60),a=Math.floor(e/60),r=e-60*a,o=t-60*e,c=n.getFormattedTime(a),i=n.getFormattedTime(r),s=n.getFormattedTime(o);return"".concat(c,":").concat(i,":").concat(s)},n.openModal=function(){n.clearInterval();var t=setInterval((function(){n.forceUpdate()}),1e3);n.setState({open:!0,startTime:n.getNowTime(),refreshInterval:t}),n.props.startBabyBottle()},n.clearInterval=function(){void 0!==n.state.refreshInterval&&clearInterval(n.state.refreshInterval)},n.saveData=function(){n.clearInterval();var t=n.getNowTime();n.props.stopBabyBottle({duration:t-n.state.startTime,quantity:n.state.quantity}),n.setState({open:!1,refreshInterval:void 0})},n.closeModal=function(){n.clearInterval(),n.setState({open:!1,refreshInterval:void 0}),n.props.stopBabyBottle(void 0)},n.getNowTime=function(){return Math.round(Date.now()/1e3)},n.getFormattedTime=function(t){return t<10?"0".concat(t):t},n.state={open:!1,startTime:0,refreshInterval:void 0,quantity:Number(localStorage.getItem(dt)||"60")},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(j.a,{variant:"outlined",color:"primary",onClick:this.openModal,children:"Biberon"}),Object(Y.jsxs)(p.a,{open:this.state.open,onClose:this.closeModal,children:[Object(Y.jsx)(h.a,{children:"Biberon"}),Object(Y.jsxs)(b.a,{children:[Object(Y.jsx)("div",{children:this.getDuration()}),Object(Y.jsxs)(at.a,{children:[Object(Y.jsx)(nt.a,{value:this.state.quantity,onChange:this.handleChange,endAdornment:Object(Y.jsx)(rt.a,{position:"end",children:"mL"}),type:"number"}),Object(Y.jsx)(ot.a,{children:"Quantit\xe9"})]})]}),Object(Y.jsxs)(f.a,{children:[Object(Y.jsx)(j.a,{autoFocus:!0,variant:"contained",onClick:this.saveData,color:"primary",children:"Fini!"}),Object(Y.jsx)(j.a,{autoFocus:!0,onClick:this.closeModal,color:"secondary",children:"Annuler"})]})]})]})}}]),a}(r.Component),pt=lt,ht=Object(v.b)(void 0,pt)(jt),bt=a(47),ft=a(101),vt=a(96),Ot=a(102),mt=a(103),yt=a(104),gt=a(105),xt=a(106),wt=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(Y.jsx)(ft.a,{component:vt.a,children:Object(Y.jsxs)(Ot.a,{"aria-label":"simple table",children:[Object(Y.jsx)(mt.a,{children:Object(Y.jsxs)(yt.a,{children:[Object(Y.jsx)(gt.a,{children:"Date"}),Object(Y.jsx)(gt.a,{children:"Type"}),Object(Y.jsx)(gt.a,{children:"Dur\xe9e"}),Object(Y.jsx)(gt.a,{children:"Qt\xe9"}),Object(Y.jsx)(gt.a,{})]})}),Object(Y.jsx)(xt.a,{children:this.renderRows()})]})})}},{key:"renderRows",value:function(){var t=this,e=[].concat(Object(bt.a)(Object.values(this.props.babyBottle)),Object(bt.a)(Object.values(this.props.breastFeed)),Object(bt.a)(Object.values(this.props.diaper)));return e.sort((function(t,e){var a=t.start||t.time;return(e.start||e.time)-a})),e.map((function(e){return e.time?t.renderDiaperRow(e):e.quantity?t.renderBabyBottleRow(e):t.renderBreastFeedRow(e)}))}},{key:"renderBreastFeedRow",value:function(t){return Object(Y.jsxs)(yt.a,{children:[Object(Y.jsx)(gt.a,{children:g(1e3*t.start)}),Object(Y.jsxs)(gt.a,{children:["Sein ","l"===t.type?"(G)":"(D)"]}),Object(Y.jsxs)(gt.a,{children:[t.duration,"s"]}),Object(Y.jsx)(gt.a,{}),Object(Y.jsx)(gt.a,{})]})}},{key:"renderDiaperRow",value:function(t){return Object(Y.jsxs)(yt.a,{children:[Object(Y.jsx)(gt.a,{children:g(1e3*t.time)}),Object(Y.jsxs)(gt.a,{children:["Couche (","p"===t.type?"P":"C",")"]}),Object(Y.jsx)(gt.a,{}),Object(Y.jsx)(gt.a,{}),Object(Y.jsx)(gt.a,{})]})}},{key:"renderBabyBottleRow",value:function(t){return Object(Y.jsxs)(yt.a,{children:[Object(Y.jsx)(gt.a,{children:g(1e3*t.start)}),Object(Y.jsx)(gt.a,{children:"Biberon"}),Object(Y.jsxs)(gt.a,{children:[t.duration,"s"]}),Object(Y.jsx)(gt.a,{children:t.quantity}),Object(Y.jsx)(gt.a,{})]})}}]),a}(r.PureComponent),Dt=Object(v.b)((function(t){return{babyBottle:t.babyBottle.data,breastFeed:t.breastFeed.data,diaper:t.diaper.data}}))(wt);function Et(){return Object(Y.jsxs)("div",{className:"App",children:[Object(Y.jsx)("header",{className:"App-header"}),Object(Y.jsxs)("div",{className:"actions",children:[Object(Y.jsx)(H,{type:"l"}),Object(Y.jsx)(H,{type:"r"}),Object(Y.jsx)(ht,{}),Object(Y.jsx)(et,{})]}),Object(Y.jsx)("div",{children:Object(Y.jsx)(Dt,{})})]})}var It=Object(y.a)({reducer:{babyBottle:ut,breastFeed:U,diaper:X}}),Bt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ft(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var a=t.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}function St(t,e){var a={};return t.forEach((function(t){a[t[e]]=t})),a}(function(){return S.apply(this,arguments)})().then((function(){Promise.all([A(),C(),L()]).then((function(t){var e=Object(n.a)(t,3),a=e[0],r=e[1],o=e[2];console.log(a,r,o),It.dispatch(lt.loadData(St(a,"start"))),It.dispatch(W.loadData(St(r,"start"))),It.dispatch(V.loadData(St(o,"time")))}))})),i.a.render(Object(Y.jsx)(o.a.StrictMode,{children:Object(Y.jsx)(v.a,{store:It,children:Object(Y.jsx)(Et,{})})}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/maternity",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/maternity","/service-worker.js");Bt?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):Ft(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ft(e,t)}))}}()}},[[75,1,2]]]);
//# sourceMappingURL=main.5af58c47.chunk.js.map