(this.webpackJsonpmaternity=this.webpackJsonpmaternity||[]).push([[0],{103:function(t,e,a){},104:function(t,e,a){},112:function(t,e,a){"use strict";a.r(e);var n=a(33),r=a(0),o=a.n(r),i=a(16),c=a.n(i),s=(a(103),a(104),a(6)),l=a(7),d=a(10),u=a(9),p=a(149),h=a(169),b=a(154),j=a(155),f=a(156),O=a(20),v=a(17),m=a(11),g=a(38),y="r",x="l";function D(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(t),n=""+(a.getMonth()+1),r=""+a.getDate(),o=a.getFullYear(),i=""+a.getHours(),c=""+a.getMinutes(),s=""+a.getSeconds();n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),i.length<2&&(i="0"+i),c.length<2&&(c="0"+c),s.length<2&&(s="0"+s);var l=[o,n,r].join("-");return l+(e?" ".concat(i,":").concat(c,":").concat(s):"")}function S(t){var e=t,a=Math.floor(e/60),n=Math.floor(a/60);return e-=60*a,a-=60*n,"".concat(w(n),":").concat(w(a),":").concat(w(e))}function w(t){var e=t.toString();return e.length<2&&(e="0"+e),e}var C=["Jan","Fev","Mar","Avr","Mai","Juin","Juil","Aout","Sept","Oct","Nov","Dec"];function B(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(1e3*t),n=(a.getMonth()+1).toString();n.length<2&&(n="0"+n);var r=a.getDate().toString();r.length<2&&(r="0"+r);var o=a.getHours().toString();o.length<2&&(o="0"+o);var i=a.getMinutes().toString();i.length<2&&(i="0"+i);var c=a.getSeconds().toString();if(c.length<2&&(c="0"+c),!e)return"".concat(a.getFullYear(),"-").concat(n,"-").concat(r);var s="".concat(a.getFullYear(),"-").concat(n,"-").concat(r,"T").concat(o,":").concat(i,":").concat(c);return s}var k,T,F=a(19),E=a(13),M=a.n(E),I=a(24),R=a(86),P={BREAST_FEED:"breastFeed",DIAPERS:"diapers",BABY_BOTTLE:"babyBottle"};function A(){return(A=Object(I.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(R.a)("maternity",1,{upgrade:function(t,e,a,n){t.createObjectStore(P.BREAST_FEED,{keyPath:"start"}),t.createObjectStore(P.DIAPERS,{keyPath:"time"}),t.createObjectStore(P.BABY_BOTTLE,{keyPath:"start"})}});case 2:return k=t.sent,t.abrupt("return",k);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(){return(N=Object(I.a)(M.a.mark((function t(e){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.put(P.BREAST_FEED,e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(){return(q=Object(I.a)(M.a.mark((function t(e){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.put(P.DIAPERS,e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return(L=Object(I.a)(M.a.mark((function t(e){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.put(P.BABY_BOTTLE,e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(){return(W=Object(I.a)(M.a.mark((function t(e){var a;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=k.transaction(P.BABY_BOTTLE,"readwrite"),t.next=3,Promise.all([].concat(Object(F.a)(Object.values(e).map((function(t){return a.store.put(t)}))),[a.done]));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(){return(Y=Object(I.a)(M.a.mark((function t(e){var a;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=k.transaction(P.DIAPERS,"readwrite"),t.next=3,Promise.all([].concat(Object(F.a)(Object.values(e).map((function(t){return a.store.put(t)}))),[a.done]));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(){return(_=Object(I.a)(M.a.mark((function t(e){var a;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=k.transaction(P.BREAST_FEED,"readwrite"),t.next=3,Promise.all([].concat(Object(F.a)(Object.values(e).map((function(t){return a.store.put(t)}))),[a.done]));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(){return(z=Object(I.a)(M.a.mark((function t(e){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.delete(P.BREAST_FEED,e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(){return(H=Object(I.a)(M.a.mark((function t(e){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.delete(P.DIAPERS,e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function G(){return(G=Object(I.a)(M.a.mark((function t(e){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k.delete(P.BABY_BOTTLE,e);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(){return J.apply(this,arguments)}function J(){return(J=Object(I.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",k.getAll(P.BREAST_FEED));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(){return V.apply(this,arguments)}function V(){return(V=Object(I.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",k.getAll(P.BABY_BOTTLE));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Q(){return $.apply(this,arguments)}function $(){return($=Object(I.a)(M.a.mark((function t(){return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",k.getAll(P.DIAPERS));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(t){t[t.IDLE=0]="IDLE",t[t.FEEDING_R=1]="FEEDING_R",t[t.FEEDING_L=2]="FEEDING_L"}(T||(T={}));var X={data:{},status:T.IDLE,lastStart:void 0};function Z(t){!function(t){N.apply(this,arguments)}(t)}var tt=Object(g.b)({name:"breastFeed",initialState:X,reducers:{startRightBreastFeeding:function(t){t.status=T.FEEDING_R,t.lastStart=Math.round(Date.now()/1e3)},startLeftBreastFeeding:function(t){t.status=T.FEEDING_L,t.lastStart=Math.round(Date.now()/1e3)},stopBreastFeeding:function(t,e){var a=t.status,n=t.lastStart;if(void 0!==n&&a!==T.IDLE&&void 0!==e.payload){var r={start:n,duration:e.payload,type:a===T.FEEDING_R?y:x};t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(v.a)({},n,r)),Z(r)}t.status=T.IDLE,t.lastStart=void 0},loadData:function(t,e){t.data=e.payload},addBreastFeedData:function(t,e){t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(v.a)({},e.payload.start,e.payload)),Z(e.payload)},removeBreastFeedData:function(t,e){delete t.data[e.payload],function(t){z.apply(this,arguments)}(e.payload)},importBreastFeedData:function(t,e){t.data=Object(m.a)(Object(m.a)({},t.data),e.payload),function(t){_.apply(this,arguments)}(e.payload)}}}),et=tt.actions,at=tt.reducer,nt=a(2),rt=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).getDuration=function(){var t=n.getNowTime()-n.state.startTime,e=Math.floor(t/60),a=Math.floor(e/60),r=e-60*a,o=t-60*e,i=n.getFormattedTime(a),c=n.getFormattedTime(r),s=n.getFormattedTime(o);return"".concat(i,":").concat(c,":").concat(s)},n.openModal=function(){n.clearInterval();var t=setInterval((function(){n.forceUpdate()}),1e3);n.setState({open:!0,startTime:n.getNowTime(),refreshInterval:t}),n.props.type===y?n.props.startRightBreastFeeding():n.props.startLeftBreastFeeding()},n.clearInterval=function(){void 0!==n.state.refreshInterval&&clearInterval(n.state.refreshInterval)},n.saveData=function(){n.clearInterval();var t=n.getNowTime();n.props.stopBreastFeeding(t-n.state.startTime),n.setState({open:!1,refreshInterval:void 0})},n.closeModal=function(t,e){e&&"backdropClick"===e||(n.clearInterval(),n.setState({open:!1,refreshInterval:void 0}),n.props.stopBreastFeeding(void 0))},n.getNowTime=function(){return Math.round(Date.now()/1e3)},n.getFormattedTime=function(t){return t<10?"0".concat(t):t},n.state={open:!1,startTime:0,refreshInterval:void 0},n}return Object(l.a)(a,[{key:"render",value:function(){var t=this.props.type===y?"droit":"gauche";return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsxs)(p.a,{variant:"contained",color:"primary",onClick:this.openModal,children:["Sein ",t]}),Object(nt.jsxs)(h.a,{open:this.state.open,onClose:this.closeModal,children:[Object(nt.jsxs)(b.a,{children:["Sein ",t]}),Object(nt.jsx)(j.a,{children:this.getDuration()}),Object(nt.jsxs)(f.a,{children:[Object(nt.jsx)(p.a,{autoFocus:!0,variant:"contained",onClick:this.saveData,color:"primary",children:"Fini!"}),Object(nt.jsx)(p.a,{autoFocus:!0,onClick:this.closeModal,color:"secondary",children:"Annuler"})]})]})]})}}]),a}(r.Component),ot=et,it=Object(O.b)(void 0,ot)(rt);function ct(t){!function(t){q.apply(this,arguments)}(t)}var st,lt=Object(g.b)({name:"Diaper",initialState:{data:{}},reducers:{logPeeDiaper:function(t){var e=Math.round(Date.now()/1e3),a={time:e,type:"p"};t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(v.a)({},e,a)),ct(a)},logStollDiaper:function(t){var e=Math.round(Date.now()/1e3),a={time:e,type:"s"};t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(v.a)({},e,a)),ct(a)},loadData:function(t,e){t.data=e.payload},addDiaperData:function(t,e){t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(v.a)({},e.payload.time,e.payload)),ct(e.payload)},removeDiaperData:function(t,e){delete t.data[e.payload],function(t){H.apply(this,arguments)}(e.payload)},importDiaperData:function(t,e){t.data=Object(m.a)(Object(m.a)({},t.data),e.payload),function(t){Y.apply(this,arguments)}(e.payload)}}}),dt=lt.actions,ut=lt.reducer,pt=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).openModal=function(){n.setState({open:!0})},n.logPee=function(){n.props.logPeeDiaper(),n.closeModal()},n.logStool=function(){n.props.logStollDiaper(),n.closeModal()},n.closeModal=function(){n.setState({open:!1})},n.state={open:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(p.a,{variant:"contained",color:"primary",onClick:this.openModal,children:"Couche"}),Object(nt.jsxs)(h.a,{open:this.state.open,onClose:this.closeModal,children:[Object(nt.jsx)(b.a,{children:"Couche"}),Object(nt.jsxs)(f.a,{children:[Object(nt.jsx)(p.a,{autoFocus:!0,onClick:this.logPee,variant:"contained",color:"primary",children:"Pipi"}),Object(nt.jsx)(p.a,{autoFocus:!0,onClick:this.logStool,variant:"contained",color:"primary",children:"Caca"}),Object(nt.jsx)(p.a,{autoFocus:!0,onClick:this.closeModal,variant:"contained",color:"secondary",children:"Annuler"})]})]})]})}}]),a}(r.Component),ht=dt,bt=Object(O.b)(void 0,ht)(pt),jt=a(114),ft=a(115),Ot=a(157),vt=a(116);!function(t){t[t.IDLE=0]="IDLE",t[t.FEEDING=1]="FEEDING"}(st||(st={}));var mt={data:{},status:st.IDLE,lastStart:void 0};function gt(t){!function(t){L.apply(this,arguments)}(t)}var yt=Object(g.b)({name:"babyBottle",initialState:mt,reducers:{startBabyBottle:function(t){t.status=st.FEEDING,t.lastStart=Math.round(Date.now()/1e3)},stopBabyBottle:function(t,e){var a=t.status,n=t.lastStart;if(void 0!==n&&a!==st.IDLE&&void 0!==e.payload){var r=e.payload,o={start:n,duration:r.duration,quantity:r.quantity};t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(v.a)({},n,o)),gt(o)}t.status=st.IDLE,t.lastStart=void 0},loadData:function(t,e){t.data=e.payload},addBabyBottleData:function(t,e){t.data=Object(m.a)(Object(m.a)({},t.data),{},Object(v.a)({},e.payload.start,e.payload)),gt(e.payload)},removeBabyBottleData:function(t,e){delete t.data[e.payload],function(t){G.apply(this,arguments)}(e.payload)},importBabyBottleData:function(t,e){t.data=Object(m.a)(Object(m.a)({},t.data),e.payload),function(t){W.apply(this,arguments)}(e.payload)}}}),xt=yt.actions,Dt=yt.reducer,St="bottleQuantity";var wt=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).handleChange=function(t){var e=Number(t.target.value);NaN===e&&(e=n.state.quantity),n.setState({quantity:e}),function(t){localStorage.setItem(St,t.toString())}(e)},n.getDuration=function(){var t=n.getNowTime()-n.state.startTime,e=Math.floor(t/60),a=Math.floor(e/60),r=e-60*a,o=t-60*e,i=n.getFormattedTime(a),c=n.getFormattedTime(r),s=n.getFormattedTime(o);return"".concat(i,":").concat(c,":").concat(s)},n.openModal=function(){n.clearInterval();var t=setInterval((function(){n.forceUpdate()}),1e3);n.setState({open:!0,startTime:n.getNowTime(),refreshInterval:t}),n.props.startBabyBottle()},n.clearInterval=function(){void 0!==n.state.refreshInterval&&clearInterval(n.state.refreshInterval)},n.saveData=function(){n.clearInterval();var t=n.getNowTime();n.props.stopBabyBottle({duration:t-n.state.startTime,quantity:n.state.quantity}),n.setState({open:!1,refreshInterval:void 0})},n.closeModal=function(t,e){e&&"backdropClick"===e||(n.clearInterval(),n.setState({open:!1,refreshInterval:void 0}),n.props.stopBabyBottle(void 0))},n.getNowTime=function(){return Math.round(Date.now()/1e3)},n.getFormattedTime=function(t){return t<10?"0".concat(t):t},n.state={open:!1,startTime:0,refreshInterval:void 0,quantity:Number(localStorage.getItem(St)||"60")},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(p.a,{variant:"contained",color:"primary",onClick:this.openModal,children:"Biberon"}),Object(nt.jsxs)(h.a,{open:this.state.open,onClose:this.closeModal,children:[Object(nt.jsx)(b.a,{children:"Biberon"}),Object(nt.jsxs)(j.a,{children:[Object(nt.jsx)("div",{children:this.getDuration()}),Object(nt.jsxs)(jt.a,{children:[Object(nt.jsx)(ft.a,{value:this.state.quantity,onChange:this.handleChange,endAdornment:Object(nt.jsx)(Ot.a,{position:"end",children:"mL"}),type:"number"}),Object(nt.jsx)(vt.a,{children:"Quantit\xe9"})]})]}),Object(nt.jsxs)(f.a,{children:[Object(nt.jsx)(p.a,{autoFocus:!0,variant:"contained",onClick:this.saveData,color:"primary",children:"Fini!"}),Object(nt.jsx)(p.a,{autoFocus:!0,onClick:this.closeModal,color:"secondary",children:"Annuler"})]})]})]})}}]),a}(r.Component),Ct=xt,Bt=Object(O.b)(void 0,Ct)(wt),kt=a(168),Tt=a(160),Ft=a(153),Et=a(161),Mt=a(162),It=a(163),Rt=a(159),Pt=a(164),At=a(158),Nt=a(119),qt=a(118),Lt=a(170);var Wt="bl",Yt="br",_t="bottle",zt="pee",Ht="stool",Gt=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).quantityRef=Object(r.createRef)(),n.startTimeRef=Object(r.createRef)(),n.endTimeRef=Object(r.createRef)(),n.getDefaultValues=function(){var t=B(Math.floor(Date.now()/1e3)),e=t,a=t,r=Number(localStorage.getItem("bottleQuantity")||"60");if(n.props.mode)if(n.props.mode===Wt||n.props.mode===Yt){var o=n.props.data;e=B(o.start),a=B(o.start+o.duration)}else if(n.props.mode===_t){var i=n.props.data;e=B(i.start),a=B(i.start+i.duration),r=i.quantity}else{e=B(n.props.data.time)}return{startDefault:e,endDefault:a,quantityDefault:r}},n.handleChange=function(t){var e=t.target.value;n.setState({mode:e})},n.openModal=function(){n.setState({open:!0})},n.saveData=function(){var t,e=0,a=0;switch(t=new Date(n.startTimeRef.current.value).getTime()/1e3,n.endTimeRef.current&&(e=new Date(n.endTimeRef.current.value).getTime()/1e3),n.quantityRef.current&&(a=Number(n.quantityRef.current.value)),n.state.mode){case _t:n.props.addBabyBottleData({start:t,duration:e-t,quantity:a});break;case Wt:n.props.addBreastFeedData({start:t,duration:e-t,type:x});break;case Yt:n.props.addBreastFeedData({start:t,duration:e-t,type:y});break;case zt:n.props.addDiaperData({time:t,type:"p"});break;case Ht:n.props.addDiaperData({time:t,type:"s"})}n.setState({open:!1})},n.closeModal=function(){n.setState({open:!1})},n.state={mode:n.props.mode||_t,open:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state.mode===Yt||this.state.mode===Wt,e=this.state.mode===_t,a=this.state.mode===zt||this.state.mode===Ht,n=this.getDefaultValues(),r=n.startDefault,o=n.endDefault,i=n.quantityDefault;return Object(nt.jsxs)(nt.Fragment,{children:[this.props.iconButton?Object(nt.jsx)(At.a,{onClick:this.openModal,children:this.props.iconButton}):Object(nt.jsx)(p.a,{variant:"contained",color:"primary",onClick:this.openModal,children:this.props.modalTitle}),Object(nt.jsxs)(h.a,{open:this.state.open,onClose:this.closeModal,children:[Object(nt.jsx)(b.a,{children:this.props.modalTitle}),Object(nt.jsxs)(j.a,{children:[Object(nt.jsxs)(jt.a,{children:[Object(nt.jsx)(Nt.a,{children:"Type"}),Object(nt.jsxs)(qt.a,{value:this.props.mode||this.state.mode,onChange:this.handleChange,disabled:!!this.props.mode,children:[Object(nt.jsx)(Lt.a,{value:Yt,children:"Sein droit"}),Object(nt.jsx)(Lt.a,{value:Wt,children:"Sein gauche"}),Object(nt.jsx)(Lt.a,{value:_t,children:"Biberon"}),Object(nt.jsx)(Lt.a,{value:zt,children:"Couche (Pipi)"}),Object(nt.jsx)(Lt.a,{value:Ht,children:"Couche (Caca)"})]})]}),a&&Object(nt.jsxs)(jt.a,{children:[Object(nt.jsx)(Nt.a,{children:"Moment"}),Object(nt.jsx)(ft.a,{inputRef:this.startTimeRef,type:"datetime-local",defaultValue:r,disabled:!!this.props.mode,inputProps:{step:1}})]}),(t||e)&&Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsxs)(jt.a,{children:[Object(nt.jsx)(Nt.a,{children:"D\xe9but"}),Object(nt.jsx)(ft.a,{inputRef:this.startTimeRef,type:"datetime-local",defaultValue:r,disabled:!!this.props.mode,inputProps:{step:1}})]}),Object(nt.jsxs)(jt.a,{children:[Object(nt.jsx)(Nt.a,{children:"Fin"}),Object(nt.jsx)(ft.a,{inputRef:this.endTimeRef,type:"datetime-local",defaultValue:o,inputProps:{step:1}})]})]}),e&&Object(nt.jsxs)(jt.a,{children:[Object(nt.jsx)(Nt.a,{children:"Quantit\xe9"}),Object(nt.jsx)(ft.a,{inputRef:this.quantityRef,defaultValue:i,endAdornment:Object(nt.jsx)(Ot.a,{position:"end",children:"mL"}),type:"number"})]})]}),Object(nt.jsxs)(f.a,{children:[Object(nt.jsx)(p.a,{autoFocus:!0,variant:"contained",onClick:this.saveData,color:"primary",children:this.props.modalTitle}),Object(nt.jsx)(p.a,{autoFocus:!0,onClick:this.closeModal,color:"secondary",children:"Annuler"})]})]})]})}}]),a}(r.Component),Kt=Object(m.a)(Object(m.a)(Object(m.a)({},xt),et),dt),Jt=Object(O.b)(void 0,Kt)(Gt),Ut=a(74),Vt=a.n(Ut),Qt=a(66),$t=a.n(Qt),Xt=(kt.a,"rowPerPage"),Zt=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).handleChangePage=function(t,e){n.setState({page:e})},n.handleChangeRowsPerPage=function(t){var e,a=Number(null===(e=t.target)||void 0===e?void 0:e.value);n.setState({rowsPerPage:a}),localStorage.setItem(Xt,a.toString())},n.state={page:0,rowsPerPage:localStorage.getItem(Xt)&&Number(localStorage.getItem(Xt))||10,data:[[]],size:0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this.getData(),e=t.data,a=t.size;e.length>0&&this.setState({data:e,page:Math.max(0,Math.min(this.state.page,e.length-1)),size:a})}},{key:"render",value:function(){return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(kt.a,{SelectProps:{MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null}},rowsPerPageOptions:[5,10,20,50],component:"div",count:this.state.size,rowsPerPage:this.state.rowsPerPage,page:this.state.page,labelRowsPerPage:"Entr\xe9es par page",labelDisplayedRows:function(t){return"".concat(t.from,"-").concat(t.to," sur ").concat(t.count)},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),Object(nt.jsx)(Tt.a,{component:Ft.a,children:Object(nt.jsxs)(Et.a,{size:"small",children:[Object(nt.jsx)(Mt.a,{children:Object(nt.jsxs)(It.a,{children:[Object(nt.jsx)(Rt.a,{children:"Date"}),Object(nt.jsx)(Rt.a,{children:"Type"}),Object(nt.jsx)(Rt.a,{children:"Dur\xe9e"}),Object(nt.jsx)(Rt.a,{children:"Qt\xe9"}),Object(nt.jsx)(Rt.a,{})]})}),Object(nt.jsx)(Pt.a,{children:this.renderRows()})]})})]})}},{key:"componentDidUpdate",value:function(t,e){if(t.babyBottle!==this.props.babyBottle||t.breastFeed!==this.props.breastFeed||t.diaper!==this.props.diaper||e.rowsPerPage!==this.state.rowsPerPage){var a=this.getData(),n=a.data,r=a.size;this.setState({data:n,page:Math.max(0,Math.min(this.state.page,n.length-1)),size:r})}}},{key:"getData",value:function(){var t=[].concat(Object(F.a)(Object.values(this.props.babyBottle)),Object(F.a)(Object.values(this.props.breastFeed)),Object(F.a)(Object.values(this.props.diaper)));t.sort((function(t,e){var a=t.start||t.time;return(e.start||e.time)-a}));for(var e=[],a=0;a*this.state.rowsPerPage<t.length;a++)e.push(t.slice(a*this.state.rowsPerPage,Math.min((a+1)*this.state.rowsPerPage,t.length)));return 0===e.length&&e.push([]),{data:e,size:t.length}}},{key:"renderRows",value:function(){var t=this;return this.state.data[this.state.page].map((function(e){return e.time?t.renderDiaperRow(e):e.quantity?t.renderBabyBottleRow(e):t.renderBreastFeedRow(e)}))}},{key:"renderBreastFeedRow",value:function(t){var e=this,a=t.type===x?Wt:Yt;return Object(nt.jsxs)(It.a,{children:[Object(nt.jsx)(Rt.a,{children:D(1e3*t.start)},"start"),Object(nt.jsxs)(Rt.a,{children:["Sein ","l"===t.type?"(G)":"(D)"]},"label"),Object(nt.jsx)(Rt.a,{children:S(t.duration)},"duration"),Object(nt.jsx)(Rt.a,{},"quantity"),Object(nt.jsxs)(Rt.a,{children:[Object(nt.jsx)(Jt,{modalTitle:"Modifier",iconButton:Object(nt.jsx)(Vt.a,{fontSize:"small"}),mode:a,data:t}),Object(nt.jsx)(At.a,{color:"secondary",onClick:function(){e.props.removeBreastFeedData(t.start)},children:Object(nt.jsx)($t.a,{fontSize:"small"})})]},"actions")]},"breastFeed"+t.start)}},{key:"renderDiaperRow",value:function(t){var e=this;return Object(nt.jsxs)(It.a,{children:[Object(nt.jsx)(Rt.a,{children:D(1e3*t.time)},"start"),Object(nt.jsxs)(Rt.a,{children:["Couche (","p"===t.type?"P":"C",")"]},"label"),Object(nt.jsx)(Rt.a,{},"duration"),Object(nt.jsx)(Rt.a,{},"quantity"),Object(nt.jsx)(Rt.a,{children:Object(nt.jsx)(At.a,{color:"secondary",onClick:function(){e.props.removeDiaperData(t.time)},children:Object(nt.jsx)($t.a,{fontSize:"small"})})},"actions")]},"diaper"+t.time)}},{key:"renderBabyBottleRow",value:function(t){var e=this;return Object(nt.jsxs)(It.a,{children:[Object(nt.jsx)(Rt.a,{children:D(1e3*t.start)},"start"),Object(nt.jsx)(Rt.a,{children:"Biberon"},"label"),Object(nt.jsx)(Rt.a,{children:S(t.duration)},"duration"),Object(nt.jsx)(Rt.a,{children:t.quantity},"quantity"),Object(nt.jsxs)(Rt.a,{children:[Object(nt.jsx)(Jt,{modalTitle:"Modifier",iconButton:Object(nt.jsx)(Vt.a,{fontSize:"small"}),mode:_t,data:t}),Object(nt.jsx)(At.a,{color:"secondary",onClick:function(){e.props.removeBabyBottleData(t.start)},children:Object(nt.jsx)($t.a,{fontSize:"small"})})]},"actions")]},"babyBottle"+t.start)}}]),a}(r.PureComponent),te=Object(m.a)(Object(m.a)(Object(m.a)({},xt),et),dt),ee=Object(O.b)((function(t){return{babyBottle:t.babyBottle.data,breastFeed:t.breastFeed.data,diaper:t.diaper.data}}),te)(Zt),ae=a(165),ne=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).textFieldRef=Object(r.createRef)(),n.onTypeChange=function(t){n.setState({input:t.target.value})},n.openModal=function(){n.setState({open:!0})},n.closeModal=function(t,e){n.setState({open:!1})},n.updateState=function(){var t,e,a=null===(t=document.getElementById("file-import"))||void 0===t||null===(e=t.files)||void 0===e?void 0:e[0];if(a&&"file"===n.state.input){var r=new FileReader;r.readAsText(a,"UTF-8"),n.setState({isImporting:!0}),r.onload=function(t){var e=t.target.result;n.updateData(e),n.setState({open:!1,isImporting:!1})},r.onerror=function(t){n.setState({isImporting:!1})}}else if("input"===n.state.input){var o,i=null===(o=n.textFieldRef.current)||void 0===o?void 0:o.value;n.updateData(i),n.setState({open:!1})}},n.updateData=function(t){if(t)try{var e=JSON.parse(t);e.babyBottle&&n.props.importBabyBottleData(e.babyBottle),e.diaper&&n.props.importDiaperData(e.diaper),e.breastFeed&&n.props.importBreastFeedData(e.breastFeed)}catch(a){}},n.state={open:!1,isImporting:!1,input:"file"},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(p.a,{variant:"outlined",color:"primary",onClick:this.openModal,children:"Importer"}),Object(nt.jsxs)(h.a,{open:this.state.open,onClose:this.closeModal,children:[Object(nt.jsx)(b.a,{children:"Importer"}),Object(nt.jsxs)(j.a,{children:[Object(nt.jsxs)(qt.a,{value:this.state.input,onChange:this.onTypeChange,children:[Object(nt.jsx)(Lt.a,{value:"file",children:"Importer depuis un fichier json"}),Object(nt.jsx)(Lt.a,{value:"input",children:"Importer depuis du texte"})]}),"file"===this.state.input?Object(nt.jsx)(jt.a,{children:Object(nt.jsx)(ft.a,{disableUnderline:!0,id:"file-import",type:"file"})}):Object(nt.jsx)(ae.a,{inputRef:this.textFieldRef,placeholder:'Entrer les donn\xe9es au format json. Exemple: {"babyBottle":{"1626014654":{"start":1626014654,"duration":1,"quantity":60}},"diaper":{"1626014657":{"time":1626014657,"type":"p"},"1626014658":{"time":1626014658,"type":"s"}},"breastFeed":{"1626014649":{"start":1626014649,"duration":2,"type":"l"},"1626014651":{"start":1626014651,"duration":2,"type":"r"}}}',multiline:!0})]}),Object(nt.jsxs)(f.a,{children:[Object(nt.jsx)(p.a,{onClick:this.updateState,disabled:this.state.isImporting,color:"secondary",children:"Importer"}),Object(nt.jsx)(p.a,{onClick:this.closeModal,color:"secondary",children:"Fermer"})]})]})]})}}]),a}(r.Component),re=Object(m.a)(Object(m.a)(Object(m.a)({},xt),et),dt),oe=Object(O.b)(void 0,re)(ne);var ie,ce=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).download=function(){!function(t,e){var a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),n=document.getElementById("downloadAnchorElem");n.setAttribute("href",a),n.setAttribute("download","".concat(e,".json")),n.click()}(n.props.state,"maternity-data-".concat(Date.now()))},n.copyToClipboard=function(){var t=document.getElementById("content-to-export");t.select(),t.setSelectionRange(0,99999999),document.execCommand("copy")},n.openModal=function(){n.setState({open:!0})},n.closeModal=function(t,e){n.setState({open:!1})},n.state={open:!1},n}return Object(l.a)(a,[{key:"render",value:function(){return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(p.a,{variant:"outlined",color:"primary",onClick:this.openModal,children:"Exporter"}),Object(nt.jsxs)(h.a,{open:this.state.open,onClose:this.closeModal,children:[Object(nt.jsx)(b.a,{children:"Exporter"}),Object(nt.jsx)(j.a,{children:Object(nt.jsx)(ae.a,{multiline:!0,id:"content-to-export",inputProps:{readOnly:!0},value:JSON.stringify(this.props.state)})}),Object(nt.jsxs)(f.a,{children:[Object(nt.jsx)(p.a,{onClick:this.download,color:"secondary",children:"T\xe9l\xe9charger"}),Object(nt.jsx)(p.a,{onClick:this.copyToClipboard,color:"secondary",children:"Copier"}),Object(nt.jsx)(p.a,{autoFocus:!0,onClick:this.closeModal,color:"secondary",children:"Fermer"})]})]})]})}}]),a}(r.Component),se=et,le=Object(O.b)((function(t){return{state:{babyBottle:t.babyBottle.data,diaper:t.diaper.data,breastFeed:t.breastFeed.data}}}),se)(ce),de=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this;return Object.keys(this.props.data).map((function(e){var a=t.props.data[e],n=D(1e3*a.time),r="p"===a.type?"Pipi":"Caca";return Object(nt.jsxs)("div",{children:[n,": Couche (",r,")"]})})).reverse()}}]),a}(r.PureComponent),ue=(Object(O.b)((function(t){return{data:t.diaper.data}}))(de),function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var t=this;return Object.keys(this.props.data).map((function(e){var a=t.props.data[e],n=D(1e3*a.start+1e3*a.duration),r="r"===a.type?"droit":"gauche";return Object(nt.jsxs)("div",{children:[n,": ",a.duration,"s (Sein ",r,")"]})})).reverse()}}]),a}(r.PureComponent)),pe=(Object(O.b)((function(t){return{data:t.breastFeed.data}}))(ue),a(53)),he="babyBottle";pe.a.register.apply(pe.a,Object(F.a)(pe.b)),function(t){t[t.MONTHS=0]="MONTHS",t[t.WEEKS=1]="WEEKS",t[t.WEEK=2]="WEEK"}(ie||(ie={}));var be,je=function(t){Object(d.a)(a,t);var e=Object(u.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).feedContainerRef=Object(r.createRef)(),n.diaperContainerRef=Object(r.createRef)(),n.feedChart=void 0,n.diaperChart=void 0,n.getBabyBottleData=function(){return n.extractData([he],(function(t){return t.quantity}))},n.getBreastFeedData=function(){return n.extractData([x,y],(function(t){return Math.round(t.duration/60)}))},n.getDiapersPeeData=function(){return n.extractData(["p"],(function(t){return 1}))},n.getDiapersStoolData=function(){return n.extractData(["s"],(function(t){return 1}))},n.getData=function(t,e,a,r){var o=Math.round((e-t)/86400);return Math.round(n.props.data.reduce((function(n,o){return n+(a.includes(o.type)&&t<=o.start&&e>o.start?r(o):0)}),0)/o)},n.extractData=function(t,e){var a=[],r=[],o=n.state.startDate;switch(n.state.mode){case ie.WEEKS:for(var i=0;i<12;i++){var c=n.getWeeksThreshold(o),s=c.start,l=c.end,d=n.getData(s,l,t,e);o=l,a.push("".concat(D(1e3*s,!1),"-").concat(D(1e3*l,!1))),r.push(d)}break;case ie.WEEK:for(var u=0;u<8;u++){var p=n.getDayThreshold(o),h=p.start,b=p.end,j=n.getData(h,b,t,e);o=b,a.push(D(1e3*h,!1)),r.push(j)}break;default:for(var f=0;f<13;f++){var O=n.getMonthThreshold(o),v=O.start,m=O.end,g=n.getData(v,m,t,e);o=m;var y=new Date(1e3*v);a.push("".concat(C[y.getMonth()]," ").concat(y.getFullYear())),r.push(g)}}return{data:r,labels:a}},n.onModeChange=function(t){var e=t.target.value,a=n.getDefaultDate(e);n.setState({mode:e,startDate:a})},n.onStartDateChange=function(t){var e=new Date(t.target.value);n.setState({startDate:e.getTime()/1e3})},n.nextDate=function(){n.updateDate("+")},n.previousDate=function(){n.updateDate("-")},n.getDefaultDate=function(t,e,a){var n="+"===a?-1:1,r=e||Math.floor(Date.now()/1e3);switch(t){case ie.MONTHS:return r-365*n*24*60*60;case ie.WEEKS:return r-11*n*7*24*60*60;default:return r-7*n*24*60*60}},n.state={mode:ie.WEEK,startDate:Math.floor((Date.now()-5184e5)/1e3)},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var t=this.getBabyBottleData(),e=t.labels,a=t.data,n=this.getBreastFeedData().data;this.feedChart=new pe.a(this.feedContainerRef.current,{type:"bar",data:{labels:e,datasets:[{yAxisID:"babyBottleAxis",label:"Biberon (mL)",data:a,backgroundColor:"lightblue"},{yAxisID:"breastFeedAxis",label:"Sein (temps en min)",data:n,backgroundColor:"green"}]},options:{scales:{breastFeedAxis:{position:"right"}}}});var r=this.getDiapersPeeData().data,o=this.getDiapersStoolData().data;this.diaperChart=new pe.a(this.diaperContainerRef.current,{type:"bar",data:{labels:e,datasets:[{label:"Pipi",data:r,backgroundColor:"lightblue"},{label:"Caca",data:o,backgroundColor:"orange"}]},options:{}})}},{key:"updateCharts",value:function(){var t=this.getBabyBottleData(),e=t.labels,a=t.data,n=this.getBreastFeedData().data;this.feedChart.data={labels:e,datasets:[{yAxisID:"babyBottleAxis",label:"Biberon (mL)",data:a,backgroundColor:"lightblue"},{yAxisID:"breastFeedAxis",label:"Sein (temps)",data:n,backgroundColor:"green"}]};var r=this.getDiapersPeeData().data,o=this.getDiapersStoolData().data;this.diaperChart.data={labels:e,datasets:[{label:"Pipi",data:r,backgroundColor:"lightblue"},{label:"Caca",data:o,backgroundColor:"orange"}]},this.feedChart.update(),this.diaperChart.update()}},{key:"getDayThreshold",value:function(t){var e=new Date(1e3*t),a=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()/1e3;return{start:a,end:a+86400}}},{key:"getWeeksThreshold",value:function(t){var e=new Date(1e3*t),a=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()/1e3;return{start:a,end:a+604800}}},{key:"getMonthThreshold",value:function(t){var e=new Date(1e3*t),a=e.getFullYear(),n=e.getMonth(),r=(n+1)%12,o=r?a:a+1;return{start:new Date(a,n).getTime()/1e3,end:new Date(o,r).getTime()/1e3}}},{key:"render",value:function(){return this.feedContainerRef.current&&this.diaperContainerRef.current&&this.updateCharts(),Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsxs)("div",{children:[Object(nt.jsx)(jt.a,{children:Object(nt.jsxs)(qt.a,{value:this.state.mode,onChange:this.onModeChange,MenuProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},getContentAnchorEl:null},children:[Object(nt.jsx)(Lt.a,{value:ie.MONTHS,children:"Mois"}),Object(nt.jsx)(Lt.a,{value:ie.WEEKS,children:"Semaines"}),Object(nt.jsx)(Lt.a,{value:ie.WEEK,children:"Jours"})]})}),Object(nt.jsx)(p.a,{style:{padding:"0",minWidth:"20px"},size:"small",onClick:this.previousDate,variant:"contained",color:"primary",children:"<"}),Object(nt.jsx)(ft.a,{style:{margin:"0 10px"},type:"datetime-local",value:B(this.state.startDate),onChange:this.onStartDateChange}),Object(nt.jsx)(p.a,{style:{padding:"0",minWidth:"20px"},size:"small",onClick:this.nextDate,variant:"contained",color:"primary",children:">"})]}),Object(nt.jsxs)("div",{children:[Object(nt.jsx)("canvas",{ref:this.feedContainerRef}),Object(nt.jsx)("canvas",{ref:this.diaperContainerRef})]})]})}},{key:"updateDate",value:function(t){var e=this.getDefaultDate(this.state.mode,this.state.startDate,t);this.setState({startDate:e})}}]),a}(r.PureComponent),fe=Object(O.b)((function(t){var e=Object.values(t.babyBottle.data).map((function(t){return{type:he,start:t.start,duration:t.duration,quantity:t.quantity}})),a=Object.values(t.breastFeed.data).map((function(t){return{type:t.type,start:t.start,duration:t.duration}})),n=Object.values(t.diaper.data).map((function(t){return{type:t.type,start:t.time}})),r=[].concat(Object(F.a)(e),Object(F.a)(a),Object(F.a)(n));return r.sort((function(t,e){return e.start-t.start})),{data:r}}))(je),Oe=a(88),ve=a(166),me=a(171);function ge(){var t=Object(r.useState)(be.HISTORY),e=Object(n.a)(t,2),a=e[0],o=e[1];return Object(nt.jsxs)("div",{className:"App",children:[Object(nt.jsx)("header",{className:"App-header"}),Object(nt.jsxs)("div",{className:"action-wrapper",children:[Object(nt.jsxs)("div",{className:"actions",children:[Object(nt.jsx)(it,{type:"l"}),Object(nt.jsx)(it,{type:"r"}),Object(nt.jsx)(Bt,{}),Object(nt.jsx)(bt,{}),Object(nt.jsx)(Jt,{modalTitle:"Ajouter"})]}),Object(nt.jsxs)("div",{className:"actions",children:[Object(nt.jsx)(le,{}),Object(nt.jsx)(oe,{})]}),Object(nt.jsx)(Oe.a,{component:"div",align:"center",children:Object(nt.jsxs)(ve.a,{component:"label",container:!0,alignItems:"center",justify:"center",spacing:1,children:[Object(nt.jsx)(ve.a,{item:!0,children:"Statistiques"}),Object(nt.jsx)(ve.a,{item:!0,children:Object(nt.jsx)(me.a,{checked:be.HISTORY===a,onChange:function(t,e){o(e?be.HISTORY:be.STATS)},name:"checkedC"})}),Object(nt.jsx)(ve.a,{item:!0,children:"Historique"})]})})]}),a===be.STATS&&Object(nt.jsx)("div",{children:Object(nt.jsx)(fe,{})}),a===be.HISTORY&&Object(nt.jsx)("div",{children:Object(nt.jsx)(ee,{})}),Object(nt.jsx)("a",{id:"downloadAnchorElem",style:{display:"none"}})]})}!function(t){t[t.HISTORY=0]="HISTORY",t[t.STATS=1]="STATS"}(be||(be={}));var ye=Object(g.a)({reducer:{babyBottle:Dt,breastFeed:at,diaper:ut}}),xe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function De(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var a=t.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}window.indexedDB;function Se(t,e){var a={};return t.forEach((function(t){a[t[e]]=t})),a}setTimeout((function(){(function(){return A.apply(this,arguments)})().then((function(){Promise.all([U(),K(),Q()]).then((function(t){var e=Object(n.a)(t,3),a=e[0],r=e[1],o=e[2];console.log(a,r,o),ye.dispatch(xt.loadData(Se(a,"start"))),ye.dispatch(et.loadData(Se(r,"start"))),ye.dispatch(dt.loadData(Se(o,"time")))}))})),c.a.render(Object(nt.jsx)(o.a.StrictMode,{children:Object(nt.jsx)(O.a,{store:ye,children:Object(nt.jsx)(ge,{})})}),document.getElementById("root"))}),200),function(t){if("serviceWorker"in navigator){if(new URL("/maternity",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/maternity","/service-worker.js");xe?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):De(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):De(e,t)}))}}()}},[[112,1,2]]]);
//# sourceMappingURL=main.558f169e.chunk.js.map